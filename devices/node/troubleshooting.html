<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <link rel="stylesheet" href="/docs/assets/css/main.css" />
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script>
    (function(canonical) {
      if (document.location.href.substr(0, document.location.href.length - document.location.hash.length) !== canonical) {
        window.location.replace(canonical);
      }
    })('https://www.thethingsnetwork.org/docs/devices/node/troubleshooting.html');
    </script>
    <!-- Begin Jekyll SEO tag v2.4.0 -->
<title>Troubleshooting | The Things Network</title>
<meta name="generator" content="Jekyll v3.4.5" />
<meta property="og:title" content="Troubleshooting" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Troubleshooting The Things Node is based on the SparkFun Pro Micro - 3.3V/8Mhz. A lot of their resources apply to our board as well. In this section we’ll discuss some common issues and link to relevant resources from SparkFun." />
<meta property="og:description" content="Troubleshooting The Things Node is based on the SparkFun Pro Micro - 3.3V/8Mhz. A lot of their resources apply to our board as well. In this section we’ll discuss some common issues and link to relevant resources from SparkFun." />
<link rel="canonical" href="https://www.thethingsnetwork.org/docs/devices/node/troubleshooting.html" />
<meta property="og:url" content="https://www.thethingsnetwork.org/docs/devices/node/troubleshooting.html" />
<meta property="og:site_name" content="The Things Network" />
<meta property="og:image" content="https://www.thethingsnetwork.org/docs/assets/images/og-image.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-12-07T02:05:35+00:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@thethingsnetwrk" />
<meta property="article:publisher" content="https://www.facebook.com/thethingsnetwork" />
<script type="application/ld+json">
{"description":"Troubleshooting The Things Node is based on the SparkFun Pro Micro - 3.3V/8Mhz. A lot of their resources apply to our board as well. In this section we’ll discuss some common issues and link to relevant resources from SparkFun.","url":"https://www.thethingsnetwork.org/docs/devices/node/troubleshooting.html","headline":"Troubleshooting","dateModified":"2018-12-07T02:05:35+00:00","datePublished":"2018-12-07T02:05:35+00:00","@type":"BlogPosting","image":"https://www.thethingsnetwork.org/docs/assets/images/og-image.png","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://ttnstaticfile.blob.core.windows.net/static/common/favicon/largetile.png"}},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.thethingsnetwork.org/docs/devices/node/troubleshooting.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
    <link rel="apple-touch-icon-precomposed" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-152.6c70a98e264d.png">
    <meta name="msapplication-TileColor" content="#FFFFFF">
    <meta name="msapplication-TileImage" content="https://ttnweb.azureedge.net/static/common/favicon/favicon-144.61bd01a950fb.png">
    <meta name="application-name" content="The Things Network">
    <meta name="msapplication-tooltip" content="Tooltip">
    <meta name="msapplication-config" content="https://ttnweb.azureedge.net/static/common/favicon/ieconfig.54334a5ee30c.xml">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-32.61b30f85680a.png" sizes="32x32">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-57.83b86c64dc82.png" sizes="57x57">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-76.7dcf8fa36dfc.png" sizes="76x76">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-96.27ac17adaa8b.png" sizes="96x96">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-120.e1526731335e.png" sizes="120x120">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-128.fabea041224c.png" sizes="128x128">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-144.61bd01a950fb.png" sizes="144x144">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-152.6c70a98e264d.png" sizes="152x152">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-180.fcd414307ca3.png" sizes="180x180">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-195.c55ce09d66da.png" sizes="195x195">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-228.bea53ec4b10b.png" sizes="228x228">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/smalltile.fabea041224c.png" sizes="128x128">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/mediumtile.3d42f7faac82.png" sizes="270x270">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/widetile.3d42f7faac82.png" sizes="558x270">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/largetile.eb144ebab4d1.png" sizes="558x558">
    <link rel="shortcut icon" sizes="196x196" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-196.277278d69ddc.png">
    <script src="/docs/assets/js/main.js"></script>
  </head>
  <body>
    <div id="header"></div>
    <div id="content">
<div class="layout-page">
  <div class="ttn-header ttn-header-small">
    <div class="ttn-container container-fluid">
      <h1>
        <img src="/docs/assets/images/the-things-white.png" alt="⛅ The Things Network" />
        <span>Learn</span>
      </h1>
    </div>
  </div>
  <div class="container-fluid ttn-container">
    <div class="row page-top-nav">
      <div class="col-sm-9">
        <ul>
          <li class="page-top-nav-crumb"><a href="http://www.thethingsnetwork.org/">Home</a></li>
          <li class="page-top-nav-crumb"><a href="/docs/">Learn</a></li>
                <li class=""><a href="/docs/lorawan/">LoRaWAN</a></li>
                <li class="active"><a href="/docs/devices/">Devices</a></li>
                <li class=""><a href="/docs/gateways/">Gateways</a></li>
                <li class=""><a href="/docs/network/">Network</a></li>
                <li class=""><a href="/docs/applications/">Applications</a></li>
        </ul>
      </div>
      <div class="hidden-xs col-sm-3 text-right">
        <a href="https://github.com/TheThingsNetwork/docs/edit/master/_content/devices/node/troubleshooting.md" class="page-edit" data-proofer-ignore><i class="fa fa-github"></i> Edit <strong>troubleshooting.md</strong></a>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-3">
        <div class="panel page-side-nav page-affix">
          <div class="panel-body">
            <h5>Devices</h5>
            <ul>
              <li class=""><a href="/docs/devices/index.html">Overview</a>
            <ul>
                <li class=""><a href="/docs/devices/registration.html">Device Registration</a>
                </li>
                <li class=""><a href="/docs/devices/bytes.html">Working with Bytes</a>
                </li>
                <li class=""><a href="/docs/devices/bestpractices.html">Best Practices</a>
                </li>
            </ul>
              </li>
            <li class="page-side-nav-section"><span>SDKs & Libraries</span>
            <ul>
                <li class=""><a href="/docs/devices/arduino/">Arduino</a>
                </li>
            </ul>
            </li>
            <li class="page-side-nav-section"><span>Hardware</span>
            <ul>
                <li class=""><a href="/docs/devices/uno/">The Things Uno</a>
                </li>
                <li class=""><a href="/docs/devices/node/">The Things Node</a>
            <ul>
                <li class=""><a href="/docs/devices/node/quick-start.html">Quick Start</a>
                </li>
                <li class=""><a href="/docs/devices/node/api.html">API Reference</a>
                </li>
                <li class="active"><a href="/docs/devices/node/troubleshooting.html">Troubleshooting</a>
                </li>
            </ul>
                </li>
                <li class=""><a href="/docs/devices/lopy/">LoPy</a>
                </li>
            </ul>
            </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="col-sm-7">
        <div class="panel">
          <div class="panel-body page-content">
            <h1 id="troubleshooting">Troubleshooting</h1>
<p>The Things Node is based on the <a href="https://www.sparkfun.com/products/12587">SparkFun Pro Micro - 3.3V/8Mhz</a>. A lot of their resources apply to our board as well. In this section we’ll discuss some common issues and link to relevant resources from SparkFun.</p>
<h2 id="serial-port-not-showing-up-mac-os">Serial Port not showing up (Mac OS)</h2>
<p>Since Mac OS El Capitan, there have been <a href="https://www.google.com/search?q=arduino+usb+el+capitan+unstable">many reports</a> with all kinds of Arduino devices where the serial port does not show up. Both <a href="https://learn.sparkfun.com/tutorials/how-to-install-ftdi-drivers/all#yosemite">SparkFun</a> and the Google search we linked give all kinds of suggestions for possible fixes. However, the simplest solution that always seems to work is to connect the Arduino via a USB hub.</p>
<h2 id="serial-port-shows-up-but-uploading-code-fails-linux">Serial Port shows up, but uploading code fails (Linux)</h2>
<p>Try the <a href="https://www.arduino.cc/en/Guide/Linux#toc6">steps documented on the Arduino Website</a>. Normally the problem is another program also trying to access the serial port. <strong>modemmanager</strong> and <strong>usb_modeswitch</strong> are common culprits of this.</p>
<h2 id="bricked">Bricked</h2>
<p>When your Things Node or Things Uno is bricked, the serial port is also not showing up. Following the common steps as laid out above does not work when the device is bricked. “Bricked” basically means that the USB-serial-port on the board is not active, meaning that you do not have a way to program it.</p>
<p>The most common cause of “bricking” is uploading code to the device that was verified and uploaded while an incorrectly board was chosen in the Arduino IDE. This is such an easy mistake which happens to the best of us, especially if you are switching between working on your The Things Uno and The Things Node.</p>
<p>SparkFun has a <a href="https://learn.sparkfun.com/tutorials/pro-micro--fio-v3-hookup-guide/troubleshooting-and-faq#ts-revive">guide</a> explaining how to fix this. These steps are also valid for The Things Node and The Things Uno. We will however continue with a summary of how to unbrick a Things Node.</p>
<ol>
  <li>
    <p>Prepare by opening the Arduino IDE. Open a new blank sketch, go to <strong>Tools &gt; Boards &gt; SparkFun Pro Micro</strong> and then <strong>Tools &gt; Processor &gt; ATmega32U4 (3.3V, 8Mhz)</strong> for The Things Node (choose Arduino Leonardo if you are using The Things Uno). Click on verify.</p>
  </li>
  <li>
    <p>Open up the back of The Things Node using a Phillips screw driver.
<img src="node-open-case.jpg" alt="" /></p>
  </li>
  <li>
    <p>Remove the batteries, and remove the two Torx screws inside the battery holder. You will need a Torx #10 screw driver for this.
<img src="node-remove-pcb.jpg" alt="" /></p>
  </li>
  <li>
    <p>Remove the PCB from the case. On the rear side you will see the Reset button (marked as <strong>S2</strong>) and the LED (marked as <strong>D2</strong>).
<img src="node-reset-led.jpg" alt="" /></p>
  </li>
  <li>
    <p>Plug in a USB cable between the Node and your computer. The Node should power up and the LED should blink or stay on, depending on what code is on it. Press the reset button twice, with about a second between presses. If you were successful, the LED should start fading on and off.</p>
  </li>
  <li>
    <p>While the LED is fading on and off, the Node is in bootloader mode. While in bootloader mode you should see a USB-serial device on your computer and in the Arduino IDE. Select it from <strong>Tools &gt; Port</strong>. The device only stays in bootloader mode for 8 seconds, so you have to be quick. Don’t worry though, you can do this over and over again until you are successful.</p>
  </li>
  <li>
    <p>While the device is in bootloader mode, inside the Arduino IDE open a blank sketch and click on upload. If this takes too long and the Node exits bootloader mode before the Arduino IDE can upload the new blank sketch, try first clicking on <strong>Upload</strong>, and then put the device into bootloader mode.</p>
    <p>Alternatively you can also use <strong>avrdude</strong> to perform an erase of the microcontroller. This is much quicker than using the Arduino IDE to upload a new sketch, but needs some more knowledge of avrdude and AVR microcontrollers.
<code class="highlighter-rouge">avrdude -patmega32u4 -cavr109 -P/dev/ttyACM0 -b57600 -e</code></p>
  </li>
  <li>
    <p>After you have programmed the device with a blank sketch, or erased it, you should be able to program it normally.</p>
  </li>
</ol>
          </div>
        </div>
      </div>
      <div class="hidden-xs col-sm-2">
        <div class="page-toc page-affix"></div>
      </div>
    </div>
  </div>
</div>
<div class="modal fade" id="lightbox" tabindex="-1" role="dialog">
  <div class="modal-dialog text-center" role="document" style="width:auto;padding:20px;">
    <a href="https://ttnstaticfile.blob.core.windows.net/static/ttn/media/logo/ttn-logo.png"><img class="modal-content modal-body" src="https://ttnstaticfile.blob.core.windows.net/static/ttn/media/logo/ttn-logo.png" alt="Zoom" /></a>
  </div>
</div>
<script src="/docs/assets/js/page.js"></script>
    </div>
    <div id="footer"></div>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.5.13/dist/vue.min.js"></script>
    <script src="https://ttnweb.azureedge.net/static/common/js/ttn-components.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/promise-polyfill@7/dist/polyfill.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fetch/2.0.3/fetch.min.js"></script>
    <script src="https://ttnweb.azureedge.net/static/common/js/vue-navbar.js"></script>
    <script src="https://ttnweb.azureedge.net/static/common/js/vue-footer.js"></script>
    <script src="https://ttnweb.azureedge.net/static/common/js/ga.js"></script>
  </body>
</html>
