<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <link rel="stylesheet" href="/docs/assets/css/main.css" />
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script>
    (function(canonical) {
      if (document.location.href.substr(0, document.location.href.length - document.location.hash.length) !== canonical) {
        window.location.replace(canonical);
      }
    })('https://www.thethingsnetwork.org/docs/applications/aws/act-on-data.html');
    </script>
    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Act on Data | The Things Network</title>
<meta name="generator" content="Jekyll v3.4.5" />
<meta property="og:title" content="Act on Data" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Act on Data" />
<meta property="og:description" content="Act on Data" />
<link rel="canonical" href="https://www.thethingsnetwork.org/docs/applications/aws/act-on-data.html" />
<meta property="og:url" content="https://www.thethingsnetwork.org/docs/applications/aws/act-on-data.html" />
<meta property="og:site_name" content="The Things Network" />
<meta property="og:image" content="https://www.thethingsnetwork.org/docs/assets/images/og-image.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-02-14T12:47:56+00:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://www.thethingsnetwork.org/docs/assets/images/og-image.png" />
<meta property="twitter:title" content="Act on Data" />
<meta name="twitter:site" content="@thethingsnetwrk" />
<meta property="article:publisher" content="https://www.facebook.com/thethingsnetwork" />
<script type="application/ld+json">
{"description":"Act on Data","headline":"Act on Data","dateModified":"2020-02-14T12:47:56+00:00","datePublished":"2020-02-14T12:47:56+00:00","@type":"BlogPosting","image":"https://www.thethingsnetwork.org/docs/assets/images/og-image.png","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.thethingsnetwork.org/docs/applications/aws/act-on-data.html"},"url":"https://www.thethingsnetwork.org/docs/applications/aws/act-on-data.html","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://ttnstaticfile.blob.core.windows.net/static/common/favicon/largetile.png"}},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
    <link rel="apple-touch-icon-precomposed" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-152.6c70a98e264d.png">
    <meta name="msapplication-TileColor" content="#FFFFFF">
    <meta name="msapplication-TileImage" content="https://ttnweb.azureedge.net/static/common/favicon/favicon-144.61bd01a950fb.png">
    <meta name="application-name" content="The Things Network">
    <meta name="msapplication-tooltip" content="Tooltip">
    <meta name="msapplication-config" content="https://ttnweb.azureedge.net/static/common/favicon/ieconfig.54334a5ee30c.xml">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-32.61b30f85680a.png" sizes="32x32">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-57.83b86c64dc82.png" sizes="57x57">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-76.7dcf8fa36dfc.png" sizes="76x76">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-96.27ac17adaa8b.png" sizes="96x96">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-120.e1526731335e.png" sizes="120x120">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-128.fabea041224c.png" sizes="128x128">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-144.61bd01a950fb.png" sizes="144x144">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-152.6c70a98e264d.png" sizes="152x152">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-180.fcd414307ca3.png" sizes="180x180">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-195.c55ce09d66da.png" sizes="195x195">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-228.bea53ec4b10b.png" sizes="228x228">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/smalltile.fabea041224c.png" sizes="128x128">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/mediumtile.3d42f7faac82.png" sizes="270x270">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/widetile.3d42f7faac82.png" sizes="558x270">
    <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/largetile.eb144ebab4d1.png" sizes="558x558">
    <link rel="shortcut icon" sizes="196x196" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-196.277278d69ddc.png">
    <script src="/docs/assets/js/main.js"></script>
  </head>
  <body>
    <div id="header"></div>
    <div id="content">
<div class="layout-page">
  <!-- <div class="ttn-header ttn-header-small">
    <div class="ttn-container container-fluid">
      <h1>
        <img src="/docs/assets/images/the-things-white.png" alt="â›… The Things Network" />
        <span>Learn</span>
      </h1>
    </div>
  </div> -->
  <div class="container-fluid ttn-container">
    <div class="row page-top-nav">
      <div class="col-sm-9">
        <ul>
          <li class="page-top-nav-crumb"><a href="http://www.thethingsnetwork.org/">Home</a></li>
          <li class="page-top-nav-crumb"><a href="/docs/">Learn</a></li>
                <li class=""><a href="/docs/lorawan/">LoRaWAN</a></li>
                <li class=""><a href="/docs/devices/">Devices</a></li>
                <li class=""><a href="/docs/gateways/">Gateways</a></li>
                <li class=""><a href="/docs/network/">Network</a></li>
                <li class="active"><a href="/docs/applications/">Applications</a></li>
        </ul>
      </div>
      <div class="hidden-xs col-sm-3 text-right">
        <a href="https://github.com/TheThingsNetwork/docs/edit/master/_content/applications/aws/act-on-data.md" class="page-edit" data-proofer-ignore><i class="fa fa-github"></i> Edit <strong>act-on-data.md</strong></a>
      </div>
    </div>
    <div class="row wrapper">
      <div class="col-sm-3 side-nav">
        <div class="panel page-side-nav">
          <div class="panel-body">
            <ul>
              <li class=""><a href="/docs/applications/index.html"><h5>Applications</h5></a>
            <ul>
                <li class=""><a href="/docs/applications/add.html">Add an Application</a>
                </li>
                <li class=""><a href="/docs/applications/options.html">Build an Application</a>
                </li>
            </ul>
              </li>
            <li class="page-side-nav-section"><span>APIs</span>
            <ul>
                <li class=""><a href="/docs/applications/apis.html">Overview</a>
                </li>
                <li class=""><a href="/docs/applications/manager/">Application Manager API</a>
                </li>
                <li class=""><a href="/docs/applications/mqtt/">Data API (MQTT)</a>
                </li>
            </ul>
            </li>
            <li class="page-side-nav-section"><span>SDKs & Libraries</span>
            <ul>
                <li class=""><a href="/docs/applications/sdks.html">Overview</a>
                </li>
                <li class=""><a href="/docs/applications/golang/">Go</a>
                </li>
                <li class=""><a href="/docs/applications/java/">Java</a>
                </li>
                <li class=""><a href="/docs/applications/nodered/">Node-RED</a>
                </li>
                <li class=""><a href="/docs/applications/nodejs/">Node.js</a>
                </li>
                <li class=""><a href="/docs/applications/python/">Python</a>
                </li>
            </ul>
            </li>
            <li class="page-side-nav-section"><span>Integrations</span>
            <ul>
                <li class=""><a href="/docs/applications/integrations.html">Overview</a>
                </li>
                <li class=""><a href="/docs/applications/aws/">AWS IoT</a>
            <ul>
                <li class=""><a href="/docs/applications/aws/quick-start.html">Quick Start</a>
                </li>
                <li class=""><a href="/docs/applications/aws/thing-registry.html">Thing Registry</a>
                </li>
                <li class=""><a href="/docs/applications/aws/test-messages.html">Test Messages</a>
                </li>
                <li class=""><a href="/docs/applications/aws/thing-shadows.html">Thing Shadows</a>
                </li>
                <li class="active"><a href="/docs/applications/aws/act-on-data.html">Act on Data</a>
                </li>
                <li class=""><a href="/docs/applications/aws/view-metrics.html">View Metrics</a>
                </li>
                <li class=""><a href="/docs/applications/aws/update.html">Update</a>
                </li>
                <li class=""><a href="/docs/applications/aws/troubleshooting.html">Troubleshooting</a>
                </li>
            </ul>
                </li>
                <li class=""><a href="/docs/applications/att/">AllThingsTalk</a>
                </li>
                <li class=""><a href="/docs/applications/cayenne/">Cayenne</a>
                </li>
                <li class=""><a href="/docs/applications/collos/">Collos</a>
                </li>
                <li class=""><a href="/docs/applications/http/">HTTP</a>
                </li>
                <li class=""><a href="/docs/applications/opensensors/">OpenSensors</a>
                </li>
                <li class=""><a href="/docs/applications/storage/">Storage</a>
                </li>
                <li class=""><a href="/docs/applications/ttnmapper/">TTN Mapper</a>
                </li>
                <li class=""><a href="/docs/applications/tago/">Tago</a>
                </li>
                <li class=""><a href="/docs/applications/thingspeak/">ThingSpeak</a>
                </li>
                <li class=""><a href="/docs/applications/evrythng/">EVRYTHNG</a>
                </li>
            </ul>
            </li>
            </ul>
            <!-- <li class="hidden-xs col-sm-2 page-toc page-affix"></li> --> 
          </div>
        </div> 
      </div>
      <div class="col-sm-9 page-body">
        <div class="panel">
          <div class="panel-body page-content">
            <h1 id="act-on-data">Act on Data</h1>
<p>AWS IoT rules allow for filtering and routing uplink messages to many AWS services, including storing S3 files, sending push notifications through SNS, sending to SQS queues, invoking Lambda functions and many more. <a href="https://docs.aws.amazon.com/iot/latest/developerguide/iot-rules.html">See Rules for AWS IoT</a> for more information.</p>
<p>This guide walks you through storing uplink messages in AWS DynamoDB.</p>
<h2 id="store-data-in-dynamodb">Store Data in DynamoDB</h2>
<p>A common reason to use IoT platforms such as AWS IoT is to store uplink messages to analyze later. AWS comes with the highly scalable table-based storage service DynamoDB. This guide walks you through storing uplink messages to a AWS DynamoDB table.</p>
<ol>
  <li>Log in to the <a href="http://console.aws.amazon.com">AWS Management Console</a></li>
  <li>In <strong>Services</strong> under <strong>Internet Of Things</strong>, go to <strong>AWS IoT</strong></li>
  <li>In the menu on the left, go to <strong>Act</strong></li>
  <li>Click <strong>Create rule</strong></li>
  <li>Enter a name for the rule, e.g. <code class="highlighter-rouge">store</code></li>
  <li>
    <p>Under <strong>Message source</strong>, you can query JSON messages that are published on MQTT in a SQL-like format</p>
    <ul>
      <li>In <strong>Attribute</strong>, enter <code class="highlighter-rouge">dev_id, metadata.time, payload_raw</code> to query the device ID, the time and the raw payload. You can add payload fields too, for example <code class="highlighter-rouge">payload_fields.temperature</code></li>
      <li>In <strong>Topic filter</strong>, enter <code class="highlighter-rouge">+/devices/+/up</code> (see <a href="./test-messages.html#uplink-messages">messages</a>)</li>
      <li>Optionally, in <strong>Condition</strong>, enter a filter. Leave blank to store everything</li>
    </ul>
    <p><img src="act-message-source.png" alt="Act message source" /></p>
  </li>
  <li>Click <strong>Add action</strong></li>
  <li>Select <strong>Split messages into multiple columns of a database table (DynamoDBv2)</strong></li>
  <li>
    <p>Under <strong>Table name</strong>, click <strong>Create a new resource</strong>. A new browser tab opens</p>
    <ol>
      <li>Click <strong>Create table</strong></li>
      <li>Enter any <strong>Table name</strong>, for example <code class="highlighter-rouge">my-app</code></li>
      <li>As <strong>Partition key</strong>, enter <code class="highlighter-rouge">dev_id</code></li>
      <li>
        <p>Optionally, check <strong>Add sort key</strong> and enter <code class="highlighter-rouge">time</code> to sort by time</p>
        <p><img src="create-table.png" alt="Create table" /></p>
      </li>
      <li>Click <strong>Create</strong> and leave this tab open</li>
    </ol>
  </li>
  <li>Go back to the AWS IoT tab, and click refresh next to <strong>Table name</strong></li>
  <li>Select your newly created table</li>
  <li>Click <strong>Create new role</strong> and enter <code class="highlighter-rouge">aws-iot-dynamodb</code>, or update an existing role to grant access from AWS IoT to the DynamoDB table</li>
  <li>Click <strong>Add action</strong></li>
  <li>Click <strong>Create rule</strong></li>
  <li>Go back to the DynamoDB table tab, and go to <strong>Items</strong></li>
  <li>
    <p>Click refresh to view your stored data:</p>
    <p><img src="table-items.png" alt="Table items" /></p>
  </li>
</ol>
          </div>  
        </div>
        <div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="modal fade" id="lightbox" tabindex="-1" role="dialog">
  <div class="modal-dialog text-center" role="document" style="width:auto;padding:20px;">
    <a href="https://ttnstaticfile.blob.core.windows.net/static/ttn/media/logo/ttn-logo.png"><img class="modal-content modal-body" src="https://ttnstaticfile.blob.core.windows.net/static/ttn/media/logo/ttn-logo.png" alt="Zoom" /></a>
  </div>
</div>
<script src="/docs/assets/js/page.js"></script>
    </div>
    <div id="footer"></div>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.5.13/dist/vue.min.js"></script>
    <script src="https://ttnweb.azureedge.net/static/common/js/ttn-components.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/promise-polyfill@7/dist/polyfill.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fetch/2.0.3/fetch.min.js"></script>
    <script src="https://ttnweb.azureedge.net/static/common/js/vue-navbar.js"></script>
    <script src="https://ttnweb.azureedge.net/static/common/js/vue-footer.js"></script>
    <script src="https://ttnweb.azureedge.net/static/common/js/ga.js"></script>
  </body>
</html>
