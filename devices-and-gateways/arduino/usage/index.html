<!DOCTYPE html>

<html lang="en-us" class="has-ttn-navbar-top">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">

  <meta name="generator" content="Hugo 0.88.1" />

  <title>Library Usage | The Things Network</title>
  <link rel="canonical" href="https://www.thethingsnetwork.org/docs/devices-and-gateways/arduino/usage/" />
  

  <link rel="apple-touch-icon-precomposed" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-152.6c70a98e264d.png">

  <meta name="msapplication-TileColor" content="#FFFFFF">
  <meta name="msapplication-TileImage" content="https://ttnweb.azureedge.net/static/common/favicon/favicon-144.61bd01a950fb.png">

  <meta name="application-name" content="The Things Network">
  <meta name="msapplication-tooltip" content="Tooltip">
  <meta name="msapplication-config" content="https://ttnweb.azureedge.net/static/common/favicon/ieconfig.54334a5ee30c.xml">

  <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-32.61b30f85680a.png" sizes="32x32">
  <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-57.83b86c64dc82.png" sizes="57x57">
  <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-76.7dcf8fa36dfc.png" sizes="76x76">
  <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-96.27ac17adaa8b.png" sizes="96x96">
  <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-120.e1526731335e.png" sizes="120x120">
  <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-128.fabea041224c.png" sizes="128x128">
  <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-144.61bd01a950fb.png" sizes="144x144">
  <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-152.6c70a98e264d.png" sizes="152x152">
  <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-180.fcd414307ca3.png" sizes="180x180">
  <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-195.c55ce09d66da.png" sizes="195x195">
  <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-228.bea53ec4b10b.png" sizes="228x228">
  <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/smalltile.fabea041224c.png" sizes="128x128">
  <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/mediumtile.3d42f7faac82.png" sizes="270x270">
  <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/widetile.3d42f7faac82.png" sizes="558x270">
  <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/largetile.eb144ebab4d1.png" sizes="558x558">
  <link rel="shortcut icon" sizes="196x196" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-196.277278d69ddc.png">
  <link rel="stylesheet" href="https://www.thethingsnetwork.org/docs/css/theme.min.58fca61d6003439b384e4126a522c6391c0560a0cbd77a99c73d351bb2018920.css" integrity="sha256-WPymHWADQ5s4TkEmpSLGORwFYKDL13qZxz01G7IBiSA=" crossorigin="anonymous">

  <link rel="stylesheet" href="https://ttui.thethingsindustries.com/release/1.0.0/main.css" />

  <meta property="og:title" content="Library Usage" />
<meta property="og:description" content="We are building a global open free crowdsourced long range low power IoT data network" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://www.thethingsnetwork.org/docs/devices-and-gateways/arduino/usage/" /><meta property="og:image" content="https://www.thethingsnetwork.org/docs/img/og-image.png"/><meta property="og:site_name" content="The Things Network" />



  <meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://www.thethingsnetwork.org/docs/img/og-image.png"/>

<meta name="twitter:title" content="Library Usage"/>
<meta name="twitter:description" content="We are building a global open free crowdsourced long range low power IoT data network"/>


</head>


<body>

<ttn-header class="theme-ttn" root-url="https://www.thethingsnetwork.org"></ttn-header><section class="section">
  <div class="container">
    <nav class="breadcrumb has-dot-separator" aria-label="breadcrumbs">
      <ul>
        
        
          <li><a href="https://www.thethingsnetwork.org/docs">Learn</a></li>
          
          
          
            
              
            
          
            
              
            
          
            
              
            
          
            
              
            
          
              <li class="">
                <a href="https://www.thethingsnetwork.org/docs/lorawan/">LoRaWAN®</a>
              </li>
            
          
              <li class="">
                <a href="https://www.thethingsnetwork.org/docs/quick-start/">Quick Start</a>
              </li>
            
          
              <li class="">
                <a href="https://www.thethingsnetwork.org/docs/applications-and-integrations/">Applications &amp; Integrations</a>
              </li>
            
          
              <li class="is-active">
                <a href="https://www.thethingsnetwork.org/docs/devices-and-gateways/">Devices &amp; Gateways</a>
              </li>
            
          
              <li class="">
                <a href="https://www.thethingsnetwork.org/docs/v2-docs/">V2 Docs (Outdated)</a>
              </li>
            
          
        
      </ul>
    </nav>
    
  </div>
</section>
<div class="container" role="document">
  <div class="columns my-0 is-desktop">
    <div class="column is-3-desktop sidebar-left">
      


<nav class="side-navigation" aria-label="Main navigation">

<h2 class="title is-size-5">Devices &amp; Gateways</h2>

<div class="menu">
  <ul class="menu-list">
  <a href="https://www.thethingsnetwork.org/docs/devices-and-gateways/" class="">Overview</a>
  <li>
      <a href="https://www.thethingsnetwork.org/docs/devices-and-gateways/bytes/" class="">Working with Bytes</a>
    </li>
  
    <p class="menu-label">
      Devices
    </p>
    
      
<li>
  <a href="https://www.thethingsnetwork.org/docs/devices-and-gateways/adding-devices/" class="">Adding Devices</a>
</li>

      
<li>
  <a href="https://www.thethingsnetwork.org/docs/devices-and-gateways/best-practices/" class="">Best Practices</a>
</li>

  
    <p class="menu-label">
      Gateways
    </p>
    
      
<li>
  <a href="https://www.thethingsnetwork.org/docs/devices-and-gateways/adding-gateways/" class="">Adding Gateways</a>
</li>

      
<li>
  <a href="https://www.thethingsnetwork.org/docs/devices-and-gateways/basics-station/" class="">LoRa Basics™ Station</a>
</li>

  
    <p class="menu-label">
      SDKs &amp; Libraries
    </p>
    
      
<li>
  <a href="https://www.thethingsnetwork.org/docs/devices-and-gateways/arduino/" class="">Arduino</a>
  


<ul class="menu-list">

  <li>
    <a href="https://www.thethingsnetwork.org/docs/devices-and-gateways/arduino/api/" class="">API Reference</a>
    
  </li>

  <li>
    <a href="https://www.thethingsnetwork.org/docs/devices-and-gateways/arduino/ide/" class="">IDE Setup &amp; Usage</a>
    
  </li>

  <li>
    <a href="https://www.thethingsnetwork.org/docs/devices-and-gateways/arduino/usage/" class="is-active">Library Usage</a>
    
    



    
  </li>

</ul>


  
</li>

  
  </ul>
</div>





</nav>

    </div>
    <div class="column is-9-desktop sidebar-middle">
      <div class="docs-content">
        <h1 class="title is-size-2">
          Library Usage
        </h1>
        <div class="content">
          
<p>Here&rsquo;s how you include and use The Things Network library. Also have a look at the examples bundled with the library. You can find them in the Arduino IDE under <strong>File &gt; Examples &gt; <a href="https://github.com/TheThingsNetwork/arduino-device-lib/tree/master/examples">TheThingsNetwork</a></strong>.</p>
<h2 id="include">Include&nbsp;<a class="header-hash" href="#include">#</a> </h2>
<p>To use the library:</p>
<ol>
<li>Follow <a href="/docs/devices-and-gateways/arduino/ide/#setup">setup</a> to install the library in Arduino IDE.</li>
<li>Select <strong>Sketch &gt; Include Library &gt; TheThingsNetwork</strong> to include it.</li>
</ol>
<p>Or simply copy and paste:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="cp">#include</span> <span class="cpf">&lt;TheThingsNetwork.h&gt;</span><span class="cp">
</span></code></pre></div><h2 id="initialize">Initialize&nbsp;<a class="header-hash" href="#initialize">#</a> </h2>
<p>A typical sketch has the following structure:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="cp">#include</span> <span class="cpf">&lt;TheThingsNetwork.h&gt;</span><span class="cp">
</span><span class="cp"></span>
<span class="c1">// OTAA or ABP keys
</span><span class="c1">// ..
</span><span class="c1"></span>
<span class="cp">#define loraSerial Serial1
</span><span class="cp">#define debugSerial Serial
</span><span class="cp"></span>
<span class="c1">// Replace REPLACE_ME with TTN_FP_EU868 or TTN_FP_US915
</span><span class="c1"></span><span class="cp">#define freqPlan REPLACE_ME
</span><span class="cp"></span>
<span class="n">TheThingsNetwork</span> <span class="nf">ttn</span><span class="p">(</span><span class="n">loraSerial</span><span class="p">,</span> <span class="n">debugSerial</span><span class="p">,</span> <span class="n">freqPlan</span><span class="p">);</span>

<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">loraSerial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">57600</span><span class="p">);</span>
  <span class="n">debugSerial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span>

  <span class="c1">// OTAA or ABP activation
</span><span class="c1"></span>  <span class="c1">// ..
</span><span class="c1"></span><span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>

  <span class="c1">// Send and receive messages
</span><span class="c1"></span>  <span class="c1">// ..
</span><span class="c1"></span><span class="p">}</span>
</code></pre></div><p>The actual streams you&rsquo;d pass to the constructor depend on the board you use and the Serial Port you connected a LoRaWAN module to. For The Things Uno and Node use the Serial Ports and baud rates shown here. For other devices see the notes about serial ports at the end of this document.</p>
<h3 id="set-the-frequency-plan">Set the frequency plan&nbsp;<a class="header-hash" href="#set-the-frequency-plan">#</a> </h3>
<p>The third argument for the constructor is a constant to set the frequency plan your device operates on. Replace <code>REPLACE_ME</code> with one of the lines below, depending on the frequency plan of your device and your country. (Click <a href="https://www.thethingsnetwork.org/docs/lorawan/frequencies-by-country.html">here</a> for an overview of all frequency plans per country).</p>
<ul>
<li><code>TTN_FP_EU868</code> (Europe, Middle East, Africa)</li>
<li><code>TTN_FP_US915</code> (Americas, except Brazil)</li>
<li><code>TTN_FP_AU915</code> (Oceania, Brazil)</li>
<li><code>TTN_FP_IN865_867</code> (India)</li>
<li><code>TTN_FP_KR920_923</code> (Korea)</li>
<li><code>TTN_FP_AS920_923</code> (Japan, Singapore, Malaysia)</li>
<li><code>TTN_FP_AS923_925</code> (Southeast Asia)</li>
</ul>
<h2 id="activate">Activate&nbsp;<a class="header-hash" href="#activate">#</a> </h2>
<p>In the <a href="https://www.arduino.cc/en/Reference/setup"><code>setup()</code></a> function, after initializing the library, we have to activate the device.</p>
<p>There are two ways to activate your device. By default your device is registered to use OTAA. You can also personalise a device to use ABP.</p>
<h3 id="over-the-air-activation-otaa">Over The Air Activation (OTAA)&nbsp;<a class="header-hash" href="#over-the-air-activation-otaa">#</a> </h3>
<p>For OTAA you will use the <code>join()</code> method with the <strong>App EUI</strong> and <strong>App Key</strong> configured for your device.</p>
<ol>
<li>
<p>Right after the include for the library create constants to hold the keys:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">appEui</span> <span class="o">=</span> <span class="s">&#34;0000000000000000&#34;</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">appKey</span> <span class="o">=</span> <span class="s">&#34;00000000000000000000000000000000&#34;</span><span class="p">;</span>
</code></pre></div><ul>
<li>For <code>appEui</code> use the <strong>Application EUI</strong> found on the device&rsquo;s page in the console. Click <i class="ion-clipboard"></i> to copy.</li>
<li>For <code>appKey</code> use the <strong>App Key</strong>.</li>
</ul>
<p>Alternatively, scroll down the device page to copy past the full snippet:</p>
<p><img src="../keys-otaa.png" alt="OTAA Keys"></p>
</li>
<li>
<p>In your <code>setup()</code> function, call <code>ttn.join()</code> with the constants you just created:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="n">ttn</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">appEui</span><span class="p">,</span> <span class="n">appKey</span><span class="p">);</span>
</code></pre></div></li>
</ol>
<p>Your device will now try to get a confirmed activation via OTAA every 10 seconds until it succeeds.</p>
<h3 id="activation-by-personalization-abp">Activation By Personalization (ABP)&nbsp;<a class="header-hash" href="#activation-by-personalization-abp">#</a> </h3>
<p>For ABP you will use the <code>personalize()</code> method with the device&rsquo;s <strong>Device EUI</strong>, <strong>Network Session Key</strong> and <strong>App Session Key</strong>.</p>
<ol>
<li>
<p>Right after the include for the library create constants to hold the keys:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">devAddr</span> <span class="o">=</span> <span class="s">&#34;00000000&#34;</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">nwkSKey</span> <span class="o">=</span> <span class="s">&#34;00000000000000000000000000000000&#34;</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">appSKey</span> <span class="o">=</span> <span class="s">&#34;00000000000000000000000000000000&#34;</span><span class="p">;</span>
</code></pre></div><ul>
<li>For <code>devAddr </code> use the <strong>Device Address</strong> found on the device&rsquo;s page in the console. Click <i class="ion-clipboard"></i> to copy.</li>
<li>For <code>nwkSKey </code> use the <strong>Network Session Key</strong>.</li>
<li>For <code>appSKey</code> use <strong>App Session Key</strong>.</li>
</ul>
<p>Alternatively, scroll down the device page to copy past the full snippet:</p>
<p><img src="../keys-abp.png" alt="ABP Keys"></p>
</li>
<li>
<p>In your <code>setup()</code> function, call <code>ttn.personalize()</code> with the constants you just created:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="n">ttn</span><span class="p">.</span><span class="n">personalize</span><span class="p">(</span><span class="n">devAddr</span><span class="p">,</span> <span class="n">nwkSKey</span><span class="p">,</span> <span class="n">appSKey</span><span class="p">);</span>
</code></pre></div></li>
</ol>
<p>Your device will now communicate with the network using these keys.</p>
<p>Also see <strong>File &gt; Examples &gt; TheThingsNetwork &gt; <a href="https://github.com/TheThingsNetwork/arduino-device-lib/blob/master/examples/ABP/ABP.ino">ABP</a></strong>.</p>
<h2 id="send">Send&nbsp;<a class="header-hash" href="#send">#</a> </h2>
<p>To send messages call <code>ttn.sendBytes()</code> with an array of bytes and its size. Here&rsquo;s an example of a <code>loop()</code> function that sends the current state of <a href="https://www.arduino.cc/en/Reference/Constants"><code>LED_BUILTIN</code></a> every 10 seconds:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">byte</span> <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
  <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">digitalRead</span><span class="p">(</span><span class="n">LED_BUILTIN</span><span class="p">)</span> <span class="o">==</span> <span class="n">HIGH</span><span class="p">)</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
    
  <span class="n">ttn</span><span class="p">.</span><span class="n">sendBytes</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">data</span><span class="p">));</span>
  
  <span class="n">delay</span><span class="p">(</span><span class="mi">10000</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><p>To minimise your use of the limited daily airtime try to use as little bytes as possible. See <a href="/docs/devices-and-gateways/bytes/">Working with Bytes</a> for more information.</p>
<p>Also see <strong>File &gt; Examples &gt; TheThingsNetwork &gt; <a href="https://github.com/TheThingsNetwork/arduino-device-lib/blob/master/examples/Send/Send.ino">Send</a></strong>.</p>
<h2 id="receive">Receive&nbsp;<a class="header-hash" href="#receive">#</a> </h2>
<p>The most common <a href="https://www.lora-alliance.org/What-Is-LoRa/Technology">Class A</a> LoRaWAN devices - including The Things Node and Uno - can only receive the last scheduled message in response to a message they send.</p>
<blockquote>
<p>For your convenience, the library has a <code>ttn.poll()</code> method which sends a single byte to poll for incoming messages, if you don&rsquo;t have anything particular to send.</p>
</blockquote>
<p>To receive message you have to define a function and pass it to the library.</p>
<ol>
<li>
<p>Add the following function to your sketch:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="kt">void</span> <span class="nf">message</span><span class="p">(</span><span class="k">const</span> <span class="n">byte</span><span class="o">*</span> <span class="n">payload</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">length</span><span class="p">,</span> <span class="n">port_t</span> <span class="n">port</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">debugSerial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&#34;-- MESSAGE&#34;</span><span class="p">);</span>
  <span class="n">debugSerial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&#34;Received &#34;</span> <span class="o">+</span> <span class="n">String</span><span class="p">(</span><span class="n">length</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#34; bytes on port &#34;</span> <span class="o">+</span> <span class="n">String</span><span class="p">(</span><span class="n">port</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#34;:&#34;</span><span class="p">);</span>

  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">length</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">debugSerial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&#34; &#34;</span> <span class="o">+</span> <span class="n">String</span><span class="p">(</span><span class="n">payload</span><span class="p">[</span><span class="n">i</span><span class="p">]));</span>
  <span class="p">}</span>

  <span class="n">debugSerial</span><span class="p">.</span><span class="n">println</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></li>
<li>
<p>Register the function in your <code>setup()</code> function:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="n">ttn</span><span class="p">.</span><span class="n">onMessage</span><span class="p">(</span><span class="n">message</span><span class="p">);</span>
</code></pre></div></li>
</ol>
<p>Also see <strong>File &gt; Examples &gt; TheThingsNetwork &gt; <a href="https://github.com/TheThingsNetwork/arduino-device-lib/blob/master/examples/Receive/Receive.ino">Receive</a></strong>.</p>
<h1 id="notes">Notes</h1>
<h2 id="serial-ports">Serial ports&nbsp;<a class="header-hash" href="#serial-ports">#</a> </h2>
<p>The RN2483 and RN2903 make use of a serial interface to communicate with your device&rsquo;s main processor. Serial interfaces are similar to the RS232 serial port on older computers. The most microcontrollers have hardware Universal Asynchronous Receiver/Transmitters (UARTs) or also called HardwareSerial ports. Serial communication is offloaded to these UARTs so that the main processor does not have to waste time on this slow task. A UART can only support one serial interface at a time, and most processors only have one or two UARTs. Therefore if you already used the available UARTs to communicate with, for example, your computer and a GPS, you do not have any left for the RN2483/RN2903.</p>
<p>When you run out of UARTs, you can still use serial communication handled in software. In this case it is not offloaded to dedicated hardware, and the main processor needs to handle the communication. This is called Software Serial. Depending on how the software serial is implemented, you can have as many as you want, as long as you have free GPIO pins on your device. Note that not all GPIO pins support all types of software serial. Examples of software serial is the default Arduino <a href="https://www.arduino.cc/en/Reference/SoftwareSerial">SoftwareSerial</a> library, and the <a href="https://www.pjrc.com/teensy/td_libs_AltSoftSerial.html">AltSoftSerial</a> library.</p>
<p>Serial communication uses high and low voltages to signal ones and zeros. The RN2483/RN2903 runs on 3.3V, which means a one is represented as a 3.3V level on the communication line, and a 0 is a 0V level on the line. Because the most Arduinos run at 5V, they expect a one to be represented by a 5V level on the line. Therefore when and Arduino sees a 3.3V signal, it causes an ambiguity. If you are lucky it works fine, but it is out of specification. To connect an RN2483/RN2903 to a 5V Arduino, you will need to include a level shifter.</p>
<h3 id="stream-objects">Stream objects&nbsp;<a class="header-hash" href="#stream-objects">#</a> </h3>
<p>In the Arduino world serial ports are abstracted as stream objects. All stream objects have the same functions, even if lower down they use different physical connections (UART, SoftwareSerial, AltSoftSerial). This library does not care what you use, as long as it extends the Stream object.</p>
<p>The Stream objects need to be initialized at the correct baud rates at the start of your <code>setup()</code> function. See <a href="https://github.com/TheThingsNetwork/arduino-device-lib/blob/master/examples">our examples</a> for more details. For example:</p>
<pre tabindex="0"><code>  loraSerial.begin(57600);
  debugSerial.begin(9600);
</code></pre><h3 id="thethingsuno">TheThingsUno&nbsp;<a class="header-hash" href="#thethingsuno">#</a> </h3>
<p>TheThingsUno is basically the same as an Arduino Leonardo with Serial1 connected to the RN2483/RN2903. Therefore if you use an Arduino Leonardo, and connect your RN2483/RN2903 to the Serial1 pins, you can use the same configuration than for TheThingsUno.</p>
<p>At the top of your sketch use</p>
<pre tabindex="0"><code>#define loraSerial Serial1
#define debugSerial Serial
</code></pre><p>And in your <code>setup()</code> function use</p>
<pre tabindex="0"><code>void setup()
{
  loraSerial.begin(57600);
  debugSerial.begin(9600);
  ...
}
</code></pre><h3 id="sodaq-one">SODAQ One&nbsp;<a class="header-hash" href="#sodaq-one">#</a> </h3>
<p>At the top of your sketch use</p>
<pre tabindex="0"><code>#define loraSerial Serial1
#define debugSerial SerialUSB
</code></pre><p>And in your <code>setup()</code> function use</p>
<pre tabindex="0"><code>void setup()
{
  loraSerial.begin(57600);
  debugSerial.begin(9600);
  ...
}
</code></pre><h3 id="arduino-uno-arduino-nano-or-other-devices-using-softwareserial">Arduino Uno, Arduino Nano or other devices using SoftwareSerial&nbsp;<a class="header-hash" href="#arduino-uno-arduino-nano-or-other-devices-using-softwareserial">#</a> </h3>
<p>The Arduino Uno only has one hardware serial port which is used to communicate over USB to the computer. When connecting an RN2483/RN2903 to the Arduino Uno, one has to make use of SoftwareSerial. If you connected the RN2483/RN2903 to the Arduino using the same pinout as <a href="https://www.thethingsnetwork.org/forum/t/how-to-build-your-first-ttn-node-arduino-rn2483/1574">described on the forum</a>, you can make use of the following code.</p>
<p>At the top of your sketch use</p>
<pre tabindex="0"><code>#include &lt;SoftwareSerial.h&gt;

#define debugSerial Serial

SoftwareSerial loraSerial(10, 11); // RX, TX
</code></pre><p>And in your <code>setup()</code> function use</p>
<pre tabindex="0"><code>void setup()
{
  loraSerial.begin(9600);
  debugSerial.begin(9600);
  ...
}
</code></pre><p>SoftwareSerial does not operate correctly at high baud rates. We normally use it at 9600 baud. Because the RN2483 and RN2903 normally operates at 57600 baud, we need to switch it to 9600 baud so that we can communicate with it using 9600 baud. This is done automatically inside TheThingsNetwork Arduino library. Changing of the baud rate of the RN2483/RN2903 is not always very reliable. Power cycling the device, or a reset, might be necessary.</p>
<p>If you connected the RN2483/RN2903 to different pins on the Arduino, you can change the line <code>SoftwareSerial loraSerial(10, 11); // RX, TX</code> to specify the correct RX and TX pins (from the Arduino&rsquo;s perspective).</p>
<p>When using the <a href="https://github.com/PaulStoffregen/AltSoftSerial">AltSoftSerial</a> library the pins you can use for software serial is fixed according to which device you use. You therefore do not have a choice which pins to use, and you may lose some other functionality, but this library seems to be more stable than the default SoftwareSerial library. Both are however usable with TheThingsNetwork library.</p>


        </div>
      
      




  


<div class="is-clearfix">
</div>

      </div>
    </div>
  </div>
</div>


<div class="ttn-footer ttui-container"><ttn-footer class="theme-ttn"></ttn-footer></div>

<script src="https://cdn.jsdelivr.net/npm/promise-polyfill@7/dist/polyfill.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fetch/2.0.3/fetch.min.js"></script>
<script src="https://ttnweb.azureedge.net/static/common/js/ga.js"></script>
<script src="https://www.thethingsnetwork.org/docs/js/vendor/basicLightbox.min.js"></script>
<script src="https://www.thethingsnetwork.org/docs/js/theme.min.6315c33ff6d3e58e075e5198612808b45644baacc583cd723003ca52dac2660c.js" integrity="sha256-YxXDP/bT5Y4HXlGYYSgItFZEuqzFg81yMAPKUtrCZgw=" crossorigin="anonymous"></script>

<ttui-cookie class="theme-ttn" id="cookie-banner"></ttui-cookie>

<script>
  var cookieBanner = document.getElementById("cookie-banner");
  window.addEventListener("ttuicookieaccept", cookieAccept, { capture: true, once: true } );
  var cookieAcceptKey = 'ttn-ca'
  var timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;

  if (readCookieAccept() || !timezone.includes("Europe") ) {
      cookieBanner.setAttribute('accepted', true);
  }

  function readCookieAccept() {
      return localStorage.getItem(cookieAcceptKey)
  }

  function cookieAccept() {
      localStorage.setItem(cookieAcceptKey, true);
  }
</script>

</body>

</html>
