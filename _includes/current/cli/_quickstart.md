# Quick Start

This document gives a quick introduction to `ttnctl`.

## Installation

You can download the latest version of `ttnctl` using the following links:

* [Mac (64 bit, zip)](https://ttnreleases.blob.core.windows.net/release/v1-staging/ttnctl-darwin-amd64.zip)
* [Linux (64 bit, zip)](https://ttnreleases.blob.core.windows.net/release/v1-staging/ttnctl-linux-amd64.zip)
* [Linux (32 bit, zip)](https://ttnreleases.blob.core.windows.net/release/v1-staging/ttnctl-linux-386.zip)
* [Linux (arm, zip)](https://ttnreleases.blob.core.windows.net/release/v1-staging/ttnctl-linux-arm.zip)
* [Windows (64 bit, zip)](https://ttnreleases.blob.core.windows.net/release/v1-staging/ttnctl-windows-amd64.exe.zip)
* [Windows (32 bit, zip)](https://ttnreleases.blob.core.windows.net/release/v1-staging/ttnctl-windows-386.exe.zip)

> _Downloads are also available as `.tar.gz` archives, just change the extension in the links above._

We often update `ttnctl`, so re-download it once in a while.

## Configuration

If you don't like the default configuration options of `ttnctl`, you can configure them with environment variables or with a [configuration file](#configuration-file). In most cases the default options should be fine. Later in this guide we'll add our application ID to the config file to save us some typing.

## Register and Login

To register as a new user, use the command [`ttnctl user create`](#ttnctl-user-create):

```
❯ ttnctl user create demo@thethingsnetwork.org
Password: <enter password>
  INFO User created
```

You can now login with [`ttnctl user login`](#ttnctl-user-login):

```
❯ ttnctl user login demo@thethingsnetwork.org
Password: <enter password>
  INFO Logged in as demo@thethingsnetwork.org and persisted token in $HOME/.ttnctl/auths.json
```

## Application Management

Now create a new application with [`ttnctl applications create`](#ttnctl-applications-create). In this example we will create an application named `Hello World App`. The

```
❯ ttnctl applications create "Hello World App"
  INFO Application created successfully
```

Show your applications along with their assigned EUIs with [`ttnctl applications`](#ttnctl-applications) command:

```
❯ ttnctl applications
  INFO Found 1 application(s)
EUI             	Name           	Owner                    	Access Keys                                 	Valid
0807060504030201	Hello World App	demo@thethingsnetwork.org	I0f+e1W+CWgIiuIC4SjR5cpLxFZQfK2agDEpuCBpttI=	true
```

If you work in a group, you can authorize your colleagues to manage the application with the [`ttnctl applications authorize`](#ttnctl-applications-authorize) command:

```
❯ ttnctl applications authorize 0807060504030201 john@doe.org
  INFO User authorized successfully
```

## Setting the new application as "active"

From now on, we are going to use the application we just created for the rest of this guide. To do this, call [`ttnctl applications use`](#ttnctl-applications-use):

```
❯ ttnctl applications use 0807060504030201
  INFO You are now using application 0807060504030201.
```

## Device Management

To register an Over-the-Air activated device (OTAA) you can use the [`ttnctl devices register`](#ttnctl-devices-register) command. In the following example we register a device with DevEUI `0102030405060708`. An AppKey will be generated by `ttnctl`:

```
❯ ttnctl devices register 0102030405060708
  INFO Generating random AppKey...
  INFO Registered device                        AppKey=E821F44D73145F8DF6BD61837C65D13A DevEUI=0102030405060708
```

For registering a personalized device (ABP) we have the command [`ttnctl devices register personalized`](#ttnctl-devices-register-personalized). In the following example we register a personalized device with DevAddr `01020304`. The NwkSKey and AppSKey will be generated by `ttnctl`:

```
❯ ttnctl devices register personalized 01020304
  INFO Generating random NwkSKey and AppSKey...
  INFO Registered personalized device           AppSKey=277C2C8F6EA9AB58FE11E33D2EE17E0C DevAddr=01020304 Flags=0 NwkSKey=684B11235E8A0053FE4CBFCCE0389646
```

You can see a list of registered devices with [`ttnctl devices`](#ttnctl-devices):

```
❯ ttnctl devices
  INFO Application does not activate new devices with default AppKey
  INFO Found 1 personalized devices (ABP)

DevAddr 	FCntUp	FCntDown	Flags
01020304	0     	0       	-

  INFO Found 1 dynamic devices (OTAA)

DevEUI          	DevAddr	FCntUp	FCntDown
0102030405060708	       	0     	0

  INFO Run 'ttnctl devices info [DevAddr|DevEUI]' for more information about a specific device
```

You can also get information about a specific device with [`ttnctl devices info`](#ttnctl-devices-info), for example for the personalized device:

```
❯ ttnctl devices info 01020304
Personalized device:

  DevAddr: 01020304
           {0x01, 0x02, 0x03, 0x04}

  NwkSKey: 684B11235E8A0053FE4CBFCCE0389646
           {0x68, 0x4B, 0x11, 0x23, 0x5E, 0x8A, 0x00, 0x53, 0xFE, 0x4C, 0xBF, 0xCC, 0xE0, 0x38, 0x96, 0x46}

  AppSKey: 277C2C8F6EA9AB58FE11E33D2EE17E0C
           {0x27, 0x7C, 0x2C, 0x8F, 0x6E, 0xA9, 0xAB, 0x58, 0xFE, 0x11, 0xE3, 0x3D, 0x2E, 0xE1, 0x7E, 0x0C}

  FCntUp:  0
  FCntDn:  0

  Flags:   -
```

And for the dynamic device:

```
❯ ttnctl devices info 0102030405060708
Dynamic device:

  AppEUI:  70B3D57ED0000121
           {0x70, 0xB3, 0xD5, 0x7E, 0xD0, 0x00, 0x01, 0x21}

  DevEUI:  0102030405060708
           {0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08}

  AppKey:  E821F44D73145F8DF6BD61837C65D13A
           {0xE8, 0x21, 0xF4, 0x4D, 0x73, 0x14, 0x5F, 0x8D, 0xF6, 0xBD, 0x61, 0x83, 0x7C, 0x65, 0xD1, 0x3A}

  Not yet activated
```

## Receiving Uplink Messages

The [`ttnctl subscribe`](#ttnctl-subscribe) command subscribes to all uplink messages that are sent to your application:

```
❯ ttnctl subscribe --plain
  INFO Subscribing to uplink messages from all devices in application 0807060504030201
  INFO Subscribed. Waiting for messages...
  WARN Sending data as plain text is bad practice. We recommend to transmit data in a binary format.
  INFO Hello world!                             DevEUI=0000000001020304
```

You can also [[subscribe to uplink messages using MQTT|Backend/Connect/Application]].

## Scheduling Downlink Messages

Scheduling downlink messages is done with the [`ttnctl downlink`](#ttnctl-downlink) command. In the following example we plan a plain-text downlink message for an ABP device with DevEUI `0000000001020304`, which is the DevAddr, prepended with `00000000`.

```
❯ ttnctl downlink 0000000001020304 --plain 'Hello back!'
  WARN Sending data as plain text is bad practice. We recommend to transmit data in a binary format.
  INFO Scheduled downlink
```

For OTAA devices, you should use the actual DevEUI:

```
❯ ttnctl downlink 0102030405060708 --plain 'Hello back!'
  WARN Sending data as plain text is bad practice. We recommend to transmit data in a binary format.
  INFO Scheduled downlink
```

With an additional argument you can specify the `ttl` of a message. The default `ttl` is `1h` (one hour). If the node doesn't send an uplink message within that time period, the scheduled downlink message is dropped.
