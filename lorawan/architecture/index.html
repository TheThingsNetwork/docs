<!DOCTYPE html>

<html lang="en-us" class="has-ttn-navbar-top">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">

  <meta name="generator" content="Hugo 0.88.1" />

  <title>LoRaWAN Architecture | The Things Network</title>
  <link rel="canonical" href="https://www.thethingsnetwork.org/docs/lorawan/architecture/" />
  

  <link rel="apple-touch-icon-precomposed" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-152.6c70a98e264d.png">

  <meta name="msapplication-TileColor" content="#FFFFFF">
  <meta name="msapplication-TileImage" content="https://ttnweb.azureedge.net/static/common/favicon/favicon-144.61bd01a950fb.png">

  <meta name="application-name" content="The Things Network">
  <meta name="msapplication-tooltip" content="Tooltip">
  <meta name="msapplication-config" content="https://ttnweb.azureedge.net/static/common/favicon/ieconfig.54334a5ee30c.xml">

  <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-32.61b30f85680a.png" sizes="32x32">
  <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-57.83b86c64dc82.png" sizes="57x57">
  <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-76.7dcf8fa36dfc.png" sizes="76x76">
  <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-96.27ac17adaa8b.png" sizes="96x96">
  <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-120.e1526731335e.png" sizes="120x120">
  <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-128.fabea041224c.png" sizes="128x128">
  <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-144.61bd01a950fb.png" sizes="144x144">
  <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-152.6c70a98e264d.png" sizes="152x152">
  <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-180.fcd414307ca3.png" sizes="180x180">
  <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-195.c55ce09d66da.png" sizes="195x195">
  <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-228.bea53ec4b10b.png" sizes="228x228">
  <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/smalltile.fabea041224c.png" sizes="128x128">
  <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/mediumtile.3d42f7faac82.png" sizes="270x270">
  <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/widetile.3d42f7faac82.png" sizes="558x270">
  <link rel="icon" href="https://ttnweb.azureedge.net/static/common/favicon/largetile.eb144ebab4d1.png" sizes="558x558">
  <link rel="shortcut icon" sizes="196x196" href="https://ttnweb.azureedge.net/static/common/favicon/favicon-196.277278d69ddc.png">
  <link rel="stylesheet" href="https://www.thethingsnetwork.org/docs/css/theme.min.58fca61d6003439b384e4126a522c6391c0560a0cbd77a99c73d351bb2018920.css" integrity="sha256-WPymHWADQ5s4TkEmpSLGORwFYKDL13qZxz01G7IBiSA=" crossorigin="anonymous">

  <link rel="stylesheet" href="https://ttui.thethingsindustries.com/release/1.0.0/main.css" />

  <meta property="og:title" content="LoRaWAN Architecture" />
<meta property="og:description" content="We are building a global open free crowdsourced long range low power IoT data network" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://www.thethingsnetwork.org/docs/lorawan/architecture/" /><meta property="og:image" content="https://www.thethingsnetwork.org/docs/architecture.png" /><meta property="og:site_name" content="The Things Network" />



  <meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://www.thethingsnetwork.org/docs/architecture.png"/>

<meta name="twitter:title" content="LoRaWAN Architecture"/>
<meta name="twitter:description" content="We are building a global open free crowdsourced long range low power IoT data network"/>


</head>


<body>

<ttn-header class="theme-ttn" root-url="https://www.thethingsnetwork.org"></ttn-header><section class="section">
  <div class="container">
    <nav class="breadcrumb has-dot-separator" aria-label="breadcrumbs">
      <ul>
        
        
          <li><a href="https://www.thethingsnetwork.org/docs">Learn</a></li>
          
          
          
            
              
            
          
            
              
            
          
            
              
            
          
            
              
            
          
              <li class="is-active">
                <a href="https://www.thethingsnetwork.org/docs/lorawan/">LoRaWAN®</a>
              </li>
            
          
              <li class="">
                <a href="https://www.thethingsnetwork.org/docs/quick-start/">Quick Start</a>
              </li>
            
          
              <li class="">
                <a href="https://www.thethingsnetwork.org/docs/applications-and-integrations/">Applications &amp; Integrations</a>
              </li>
            
          
              <li class="">
                <a href="https://www.thethingsnetwork.org/docs/devices-and-gateways/">Devices &amp; Gateways</a>
              </li>
            
          
              <li class="">
                <a href="https://www.thethingsnetwork.org/docs/v2-docs/">V2 Docs (Outdated)</a>
              </li>
            
          
        
      </ul>
    </nav>
    
  </div>
</section>
<div class="container" role="document">
  <div class="columns my-0 is-desktop">
    <div class="column is-3-desktop sidebar-left">
      


<nav class="side-navigation" aria-label="Main navigation">

<h2 class="title is-size-5">LoRaWAN®</h2>

<div class="menu">
  <ul class="menu-list">
  <a href="https://www.thethingsnetwork.org/docs/lorawan/" class="">Overview</a>
  
    <p class="menu-label">
      The Things Fundamentals
    </p>
    
      
<li>
  <a href="https://www.thethingsnetwork.org/docs/lorawan/what-is-lorawan/" class="">What are LoRa and LoRaWAN?</a>
</li>

      
<li>
  <a href="https://www.thethingsnetwork.org/docs/lorawan/architecture/" class="is-active">LoRaWAN Architecture</a>
  



  
</li>

      
<li>
  <a href="https://www.thethingsnetwork.org/docs/lorawan/regional-parameters/" class="">Regional Parameters</a>
</li>

      
<li>
  <a href="https://www.thethingsnetwork.org/docs/lorawan/message-types/" class="">Message Types</a>
</li>

      
<li>
  <a href="https://www.thethingsnetwork.org/docs/lorawan/security/" class="">Security</a>
</li>

      
<li>
  <a href="https://www.thethingsnetwork.org/docs/lorawan/classes/" class="">Device Classes</a>
</li>

      
<li>
  <a href="https://www.thethingsnetwork.org/docs/lorawan/end-device-activation/" class="">End Device Activation</a>
</li>

      
<li>
  <a href="https://www.thethingsnetwork.org/docs/lorawan/spreading-factors/" class="">Spreading Factors</a>
</li>

      
<li>
  <a href="https://www.thethingsnetwork.org/docs/lorawan/adaptive-data-rate/" class="">Adaptive Data Rate</a>
</li>

      
<li>
  <a href="https://www.thethingsnetwork.org/docs/lorawan/limitations/" class="">Limitations</a>
</li>

  
    <p class="menu-label">
      Additional Information
    </p>
    
      
<li>
  <a href="https://www.thethingsnetwork.org/docs/lorawan/frequencies-by-country/" class="">Frequency Plans by Country</a>
</li>

      
<li>
  <a href="https://www.thethingsnetwork.org/docs/lorawan/frequency-plans/" class="">Frequency Plans</a>
</li>

      
<li>
  <a href="https://www.thethingsnetwork.org/docs/lorawan/duty-cycle/" class="">Duty Cycle</a>
</li>

      
<li>
  <a href="https://www.thethingsnetwork.org/docs/lorawan/glossary/" class="">Glossary</a>
</li>

      
<li>
  <a href="https://www.thethingsnetwork.org/docs/lorawan/modulation-data-rate/" class="">Modulation &amp; Data Rate</a>
</li>

      
<li>
  <a href="https://www.thethingsnetwork.org/docs/lorawan/addressing/" class="">Addressing &amp; Activation</a>
</li>

      
<li>
  <a href="https://www.thethingsnetwork.org/docs/lorawan/academic/" class="">Academic Research</a>
</li>

      
<li>
  <a href="https://www.thethingsnetwork.org/docs/lorawan/db-dbm-dbi-dbd/" class="">dB, dBm, dBi and dBd</a>
</li>

      
<li>
  <a href="https://www.thethingsnetwork.org/docs/lorawan/fec-and-code-rate/" class="">Forward Error Correction and Code Rate</a>
</li>

      
<li>
  <a href="https://www.thethingsnetwork.org/docs/lorawan/concentrators/" class="">LoRaWAN® Concentrators</a>
</li>

      
<li>
  <a href="https://www.thethingsnetwork.org/docs/lorawan/transceivers/" class="">LoRaWAN® Transceivers</a>
</li>

      
<li>
  <a href="https://www.thethingsnetwork.org/docs/lorawan/prefix-assignments/" class="">NetID and DevAddr Prefix Assignments</a>
</li>

      
<li>
  <a href="https://www.thethingsnetwork.org/docs/lorawan/preparing-certification/" class="">Preparing for The Things Certified Fundamentals</a>
</li>

      
<li>
  <a href="https://www.thethingsnetwork.org/docs/lorawan/rssi-and-snr/" class="">RSSI and SNR</a>
</li>

      
<li>
  <a href="https://www.thethingsnetwork.org/docs/lorawan/the-things-certified-security/" class="">The Things Certified Security</a>
</li>

  
  </ul>
</div>





</nav>

    </div>
    <div class="column is-9-desktop sidebar-middle">
      <div class="docs-content">
        <h1 class="title is-size-2">
          LoRaWAN Architecture
        </h1>
        <div class="content">
          
<p>LoRaWAN networks are deployed in a <strong>star-of-stars</strong> topology.</p>
<p>A typical LoRaWAN network consists of the following elements.</p>
<p><img src="architecture.png" alt="LoRaWAN Overview">
<em>Figure: A typical LoRaWAN network architecture</em></p>
<ul>
<li>
<p><strong>End Devices</strong> - sensors or actuators send LoRa modulated wireless messages to the gateways or receive messages wirelessly back from the gateways.
.</p>
</li>
<li>
<p><strong>Gateways</strong> - receive messages from end devices and forward them to the Network Server.</p>
</li>
<li>
<p><strong>Network Server</strong> - a piece of software running on a server that manages the entire network.</p>
</li>
<li>
<p><strong>Application servers</strong> - a piece of software running on a server that is responsible for securely processing application data.</p>
</li>
<li>
<p><strong>Join Server</strong> - a piece of software running on a server that processes join-request messages sent by end devices (The Join Server is not shown in the above figure).</p>
</li>
</ul>
<p>End devices communicate with nearby gateways and each gateway is connected to the network server. LoRaWAN networks use an ALOHA based protocol, so end devices don’t need to peer with specific gateways. Messages sent from end devices travel through all gateways within range. These messages are received by the Network Server. If the Network Server has received multiple copies of the same message, it keeps a single copy of the message and discards others. This is known as message deduplication.</p>
<p>Let’s examine each element of the LoRaWAN network in detail.</p>
<h3 id="end-devices">End devices&nbsp;<a class="header-hash" href="#end-devices">#</a> </h3>
<p>A LoRaWAN end device can be a sensor, an actuator, or both. They are often battery operated. These end devices are wirelessly connected to the LoRaWAN network through gateways using LoRa RF modulation. The following figure shows an end device that consists of sensors like temperature, humidity, and fall detection.</p>
<p><img src="generic-node-sensor-edition.jpg" alt="alt_text" title="End-device">
<em>Figure: LoRaWAN end device - The Things Industries Generic Node Sensor Edition</em></p>
<h3 id="gateways">Gateways&nbsp;<a class="header-hash" href="#gateways">#</a> </h3>
<p>Each gateway is registered (using configuration settings) to a LoRaWAN network server. A gateway receives LoRa messages from end devices and simply forwards them to the LoRaWAN network server. Gateways are connected to the Network Server using a <strong>backhaul</strong> like Cellular (3G/4G/5G), WiFi, Ethernet, fiber-optic or 2.4 GHz radio links.</p>
<h4 id="types-of-lorawan-gateways">Types of LoRaWAN Gateways&nbsp;<a class="header-hash" href="#types-of-lorawan-gateways">#</a> </h4>
<p>LoRaWAN gateways can be categorized into indoor (picocell) and outdoor (macrocell) gateways.
Indoor gateways are cost-effective and suitable for providing coverage in places like deep-indoor locations (spaces covered by multiple walls), basements, and multi-floor buildings. These gateways have internal antennas or external ‘pigtail’ antennas. However depending on the indoor physical environment some indoor gateways can receive messages from sensors located several kilometers away.</p>
<p>The following figure shows The Things Indoor gateway designed to be directly plugged into an AC power outlet.</p>
<p><img src="indoor-gateway.png" alt="alt_text" title="The Things Indoor Gateway"></p>
<p><em>Figure: The Things Indoor gateway</em></p>
<p>Outdoor gateways provide a larger coverage than the indoor gateways. They are suitable for providing coverage in both rural and urban areas. . These gateways can be mounted on cellular towers, the rooftops of very tall buildings, metal pipes (masts) etc. Usually an outdoor gateway has an external antenna (i.e. Fiberglass antenna) connected using a coaxial cable.
If you are good at hacking electronic products, you can convert some indoor gateways to outdoor gateways using water/dust proof enclosures and adding external antennas.</p>
<p>The following figure shows a LoRaWAN outdoor gateway. It has connectors for connecting external LoRaWAN, 3G/4G, and GPS antennas. Can you figure them out?</p>
<p><img src="outdoor-gateway.png" alt="alt_text" title="Tektelic Enterprise Outdoor Gateway"></p>
<p><em>Figure: Tektelic Enterprise Outdoor Gateway</em></p>
<p>Usually, the receiver sensitivity of an outdoor gateway is higher than the receiver sensitivity of an indoor gateway.</p>
<h3 id="network-server">Network Server&nbsp;<a class="header-hash" href="#network-server">#</a> </h3>
<p>The Network Server manages gateways, end-devices, applications, and users in the entire LoRaWAN network.</p>
<p>A typical LoRaWAN Network Server has the following features.</p>
<ul>
<li>Establishing secure 128-bit AES connections for the transport of messages between end-devices and the Application Server (end-to-end security).</li>
<li>Validating the authenticity of end devices and integrity of messages.</li>
<li>Deduplicating uplink messages.</li>
<li>Selecting the best gateway for routing downlink messages.</li>
<li>Sending ADR commands to optimize the data rate of devices.</li>
<li>Device address checking.</li>
<li>Providing acknowledgements of confirmed uplink data messages.</li>
<li>Forwarding uplink application payloads to the appropriate application servers</li>
<li>Routing uplink application payloads to the appropriate Application Server.</li>
<li>Forwarding Join-request and Join-accept messages between the devices and the join server</li>
<li>Responding to all MAC layer commands.</li>
</ul>
<h3 id="application-server">Application Server&nbsp;<a class="header-hash" href="#application-server">#</a> </h3>
<p>The Application Server processes application-specific data messages received from end devices. It also generates all the application-layer downlink payloads and sends them to the connected end devices through the Network Server. A LoRaWAN network can have more than one Application Server. The collected data can be interpreted by applying techniques like machine learning and artificial intelligence to solve business problems.</p>
<h3 id="join-server">Join Server&nbsp;<a class="header-hash" href="#join-server">#</a> </h3>
<p>The Join Server assists in secure device activation, root key storage, and session key generation. The join procedure is initiated by the end device by sending the Join-request message to the Join Server through the Network Server. The Join-server processes the Join-request message, generates session keys, and transfers NwkSKey and AppSKey to the Network server and the Application server respectively.
The Join Server was first introduced with LoRaWAN v1.1. It is also availabe in LoRaWAN v1.0.4.</p>
<h2 id="questions">Questions&nbsp;<a class="header-hash" href="#questions">#</a> </h2>
<ol>
<li>
<p>Who initiates uplink messages?</p>
<ul>
<li>Network server</li>
<li><span style="text-decoration:underline;">End devices</span></li>
<li>Application server</li>
<li>Join server</li>
</ul>
</li>
<li>
<p>What is not a role of the Network Server?</p>
<ul>
<li>Data deduplication</li>
<li><span style="text-decoration:underline;">Initiate uplink messages</span></li>
<li>Adaptive data rate control</li>
<li>Message routing</li>
</ul>
</li>
<li>
<p>Which is not a backhaul for gateways?</p>
<ul>
<li>Cellular</li>
<li>WiFi</li>
<li>Ethernet</li>
<li><span style="text-decoration:underline;">Grounding wire with a lightning arrestor</span></li>
</ul>
</li>
<li>
<p>The Application server processes:</p>
<ul>
<li>MAC commands</li>
<li><span style="text-decoration:underline;">Application-specific data messages</span></li>
<li>Join-request messages</li>
</ul>
</li>
<li>
<p>The Join Server processes:</p>
<ul>
<li><span style="text-decoration:underline;">Join-request messages</span></li>
<li>MAC commands</li>
<li>Application-specific data messages</li>
</ul>
</li>
</ol>


        </div>
      
      




  

  
    
    
  

  

  

  

  

  

  

  

  


<div class="is-clearfix">
<a class="button is-pulled-left" href="/docs/lorawan/what-is-lorawan/">← What are LoRa and LoRaWAN?</a>
<a class="button is-pulled-right" href="/docs/lorawan/regional-parameters/">Regional Parameters →</a>
</div>

      </div>
    </div>
  </div>
</div>


<div class="ttn-footer ttui-container"><ttn-footer class="theme-ttn"></ttn-footer></div>

<script src="https://cdn.jsdelivr.net/npm/promise-polyfill@7/dist/polyfill.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fetch/2.0.3/fetch.min.js"></script>
<script src="https://ttnweb.azureedge.net/static/common/js/ga.js"></script>
<script src="https://www.thethingsnetwork.org/docs/js/vendor/basicLightbox.min.js"></script>
<script src="https://www.thethingsnetwork.org/docs/js/theme.min.6315c33ff6d3e58e075e5198612808b45644baacc583cd723003ca52dac2660c.js" integrity="sha256-YxXDP/bT5Y4HXlGYYSgItFZEuqzFg81yMAPKUtrCZgw=" crossorigin="anonymous"></script>

<ttui-cookie class="theme-ttn" id="cookie-banner"></ttui-cookie>

<script>
  var cookieBanner = document.getElementById("cookie-banner");
  window.addEventListener("ttuicookieaccept", cookieAccept, { capture: true, once: true } );
  var cookieAcceptKey = 'ttn-ca'
  var timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;

  if (readCookieAccept() || !timezone.includes("Europe") ) {
      cookieBanner.setAttribute('accepted', true);
  }

  function readCookieAccept() {
      return localStorage.getItem(cookieAcceptKey)
  }

  function cookieAccept() {
      localStorage.setItem(cookieAcceptKey, true);
  }
</script>

</body>

</html>
